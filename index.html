<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ò–Ω–≥–æ—Å—Å—Ç—Ä–∞ - –∏–ø–æ—Ç–µ—á–Ω—ã–π –ø–∞—Ä—Å–µ—Ä(–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä) —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è</title>
  <meta name="description" content="–ò–ø–æ—Ç–µ—á–Ω—ã–π –ø–∞—Ä—Å–µ—Ä —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è - –±—ã—Å—Ç—Ä—ã–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏–ø–æ—Ç–µ—á–Ω–æ–≥–æ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è">

  <link rel="stylesheet" href="style.css?v=5">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ -->
  <script defer src="config_banks.js?v=5"></script>
  <script defer src="tariffs_life.js?v=5"></script>
  <script defer src="tariffs_property.js?v=5"></script>

  <!-- –õ–æ–≥–∏–∫–∞ -->
  <script defer src="parser.js?v=5"></script>
  <script defer src="calculator_v2.js?v=5"></script>
  <script src="openai.js?v=5"></script>
</head>

<body>
  <!-- –®–∞–ø–∫–∞ -->
  <header class="header">
    <div class="header__container">
      <div class="header__title">
        <h1>–ò–Ω–≥–æ—Å—Å—Ç—Ä–∞ - –∏–ø–æ—Ç–µ—á–Ω—ã–π –ø–∞—Ä—Å–µ—Ä(–∫–∞–ª—å–∫—É–ª—è—Ç–æ—Ä) —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è</h1>
        <p class="header__subtitle">–ë—ã—Å—Ç—Ä—ã–π –∏ —Ç–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏–ø–æ—Ç–µ—á–Ω–æ–≥–æ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è</p>
      </div>
    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="main">
    <div class="container">

      <!-- –†–∞–∑–¥–µ–ª —Ä–∞—Å—á–µ—Ç–∞ -->
      <section class="calculation-section">
        <div class="calculation-card">
          <h2>üìä –†–∞—Å—á–µ—Ç —Å—Ç–æ–∏–º–æ—Å—Ç–∏ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è</h2>

          <!-- –ü–æ–ª–µ –≤–≤–æ–¥–∞ -->
          <div class="input-group">
            <label for="client-input">–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –∫–ª–∏–µ–Ω—Ç–∞:</label>
            <textarea
              id="client-input"
              placeholder="–ü—Ä–∏–º–µ—Ä: –í–¢–ë –æ—Å—Ç 3000000 –º—É–∂ 15.08.1985 –¥–æ–º –∫–∏—Ä–ø–∏—á"
              rows="3"
              maxlength="1000"
            ></textarea>
            <div class="input-help">
              –£–∫–∞–∂–∏—Ç–µ: –±–∞–Ω–∫, –û–°–ó, –¥–∞–Ω–Ω—ã–µ –∑–∞–µ–º—â–∏–∫–∞, —Ç–∏–ø –æ–±—ä–µ–∫—Ç–∞
            </div>
          </div>

          <!-- –ö–Ω–æ–ø–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ -->
          <div class="button-group">
            <button id="calculate-btn" class="btn btn-primary">
              üìà –†–∞—Å—Å—á–∏—Ç–∞—Ç—å
            </button>
            <button id="clear-btn" class="btn btn-secondary">
              üóëÔ∏è –û—á–∏—Å—Ç–∏—Ç—å
            </button>
          </div>
        </div>

        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞ -->
        <div id="results-section" class="results-section" style="display: none;">
          <div class="results-card">
            <h3>üí∞ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h3>
            <div id="results-content" class="results-content">
              <!-- –ó–¥–µ—Å—å –±—É–¥—É—Ç –æ—Ç–æ–±—Ä–∞–∂–∞—Ç—å—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
            </div>
          </div>
        </div>
      </section>

      <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã—Ö –±–∞–Ω–∫–∞—Ö -->
      <section class="info-section">
        <div class="info-card">
          <h3>üè¶ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –±–∞–Ω–∫–∏</h3>
          <div class="banks-grid">
            <span class="bank-tag">–°–±–µ—Ä–±–∞–Ω–∫</span>
            <span class="bank-tag">–í–¢–ë</span>
            <span class="bank-tag">–î–æ–º.–†–§</span>
            <span class="bank-tag">–ê–ª—å—Ñ–∞ –ë–∞–Ω–∫</span>
            <span class="bank-tag">–¢–∏–º–µ—Ä –ë–∞–Ω–∫</span>
            <span class="bank-tag">–ú–µ—Ç–∞–ª–ª–∏–Ω–≤–µ—Å—Ç</span>
            <span class="bank-tag">–†–æ—Å–±–∞–Ω–∫</span>
            <span class="bank-tag">–†–∞–π—Ñ—Ñ–∞–π–∑–µ–Ω</span>
            <span class="bank-tag">–ü—Ä–æ–º—Å–≤—è–∑—å–±–∞–Ω–∫</span>
            <span class="bank-tag">–ê–∫ –ë–∞—Ä—Å</span>
            <span class="bank-tag">–ó–µ–Ω–∏—Ç</span>
            <span class="bank-tag">–ò–¢–ë/–¢–ö–ë</span>
            <span class="bank-tag">–£–ë–†–ò–†</span>
            <span class="bank-tag">–£—Ä–∞–ª—Å–∏–±</span>
            <span class="bank-tag">–Æ–Ω–∏–∫—Ä–µ–¥–∏—Ç</span>
          </div>
        </div>

        <div class="info-card">
          <h3>üìã –§–æ—Ä–º–∞—Ç –≤–≤–æ–¥–∞ –¥–∞–Ω–Ω—ã—Ö</h3>
          <div class="format-examples">
            <div class="format-item">
              <strong>–ë–∞–Ω–∫:</strong> –°–±–µ—Ä–±–∞–Ω–∫, –í–¢–ë, –î–æ–º.–†–§ –∏ —Ç.–¥.
            </div>
            <div class="format-item">
              <strong>–û–°–ó:</strong> –æ—Å—Ç–∞—Ç–æ–∫ —Å—Å—É–¥–Ω–æ–π –∑–∞–¥–æ–ª–∂–µ–Ω–Ω–æ—Å—Ç–∏ (—á–∏—Å–ª–æ)
            </div>
            <div class="format-item">
              <strong>–ó–∞–µ–º—â–∏–∫:</strong> –º—É–∂/–∂–µ–Ω DD.MM.YYYY –∏–ª–∏ –æ–Ω/–æ–Ω–∞ DD.MM.YYYY
            </div>
            <div class="format-item">
              <strong>–û–±—ä–µ–∫—Ç:</strong> –∫–≤–∞—Ä—Ç–∏—Ä–∞, –¥–æ–º –∫–∏—Ä–ø–∏—á, –¥–æ–º –¥–µ—Ä–µ–≤–æ
            </div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <!-- –ü–æ–¥–≤–∞–ª -->
  <footer class="footer">
    <div class="container">
      <p>&copy; 2025 –ò–Ω–≥–æ—Å—Å—Ç—Ä–∞ - –∏–ø–æ—Ç–µ—á–Ω—ã–π –ø–∞—Ä—Å–µ—Ä —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.</p>
    </div>
  </footer>

  <script>
    // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
    document.addEventListener('DOMContentLoaded', function() {
      const clientInput = document.getElementById('client-input');
      const calculateBtn = document.getElementById('calculate-btn');
      const clearBtn = document.getElementById('clear-btn');
      const resultsSection = document.getElementById('results-section');
      const resultsContent = document.getElementById('results-content');

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ —Ä–∞—Å—á–µ—Ç–∞
      calculateBtn.addEventListener('click', function() {
        const message = clientInput.value.trim();

        if (!message) {
          showError('–í–≤–µ–¥–∏—Ç–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞');
          return;
        }

        // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –∑–∞–≥—Ä—É–∑–∫–∏
        calculateBtn.disabled = true;
        calculateBtn.innerHTML = '‚è≥ –†–∞—Å—Å—á–∏—Ç—ã–≤–∞–µ–º...';

        try {
          const result = processClientRequest(message);

          // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
          resultsContent.innerHTML = result;
          resultsSection.style.display = 'block';

          // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º –∫ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º
          resultsSection.scrollIntoView({ behavior: 'smooth' });

        } catch (error) {
          console.error('–û—à–∏–±–∫–∞:', error);
          showError('–ü—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤–≤–µ–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ.');
        } finally {
          // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ –∏—Å—Ö–æ–¥–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
          calculateBtn.disabled = false;
          calculateBtn.innerHTML = 'üìà –†–∞—Å—Å—á–∏—Ç–∞—Ç—å';
        }
      });

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –∫–Ω–æ–ø–∫–∏ –æ—á–∏—Å—Ç–∫–∏
      clearBtn.addEventListener('click', function() {
        clientInput.value = '';
        resultsSection.style.display = 'none';
        resultsContent.innerHTML = '';
        clientInput.focus();
      });

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ Enter –≤ –ø–æ–ª–µ –≤–≤–æ–¥–∞
      clientInput.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
          e.preventDefault();
          calculateBtn.click();
        }
      });

      // –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –æ—à–∏–±–æ–∫
      function showError(message) {
        resultsContent.innerHTML = `<div style="color: #dc3545; padding: 15px; border: 1px solid #dc3545; border-radius: 8px; margin: 15px 0; background-color: #f8d7da;">
          <strong>‚ùå ${message}</strong>
        </div>`;
        resultsSection.style.display = 'block';
        resultsSection.scrollIntoView({ behavior: 'smooth' });
      }

      // –§–æ–∫—É—Å –Ω–∞ –ø–æ–ª–µ –≤–≤–æ–¥–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
      clientInput.focus();
    });
  </script>
</body>
</html>
