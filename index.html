<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∏–ø–æ—Ç–µ–∫–∏ ‚Äî –ò–Ω–≥–æ—Å—Å—Ç—Ä–∞—Ö</title>
  <meta name="description" content="–†–∞—Å—Å—á–∏—Ç–∞–π—Ç–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∏–ø–æ—Ç–µ–∫–∏ –æ–Ω–ª–∞–π–Ω. –ë—ã—Å—Ç—Ä—ã–π –∏ —Ç–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç —Å —É—á–µ—Ç–æ–º –≤—Å–µ—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.">

  <link rel="stylesheet" href="style.css?v=4">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">

  <!-- Puter API –¥–ª—è –º–æ—â–Ω–æ–≥–æ AI -->
  <script src="https://js.puter.com/v2/"></script>

  <!-- –ü–æ–¥–∫–ª—é—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ -->
  <script defer src="config_banks.js?v=4"></script>
  <script defer src="tariffs_life.js?v=4"></script>
  <script defer src="tariffs_property.js?v=4"></script>

  <!-- –õ–æ–≥–∏–∫–∞ -->
  <script defer src="parser.js?v=4"></script>
  <script defer src="calculator_v2.js?v=4"></script>
  <script src="openai.js?v=4"></script>

  <!-- UI -->
  <script defer src="ui-adapter.js?v=4"></script>
</head>

<body>
  <!-- –®–∞–ø–∫–∞ -->
  <header class="header">
    <div class="header__container">
      <div class="header__title">
        <h1>–ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∏–ø–æ—Ç–µ–∫–∏</h1>
      </div>
    </div>
  </header>

  <!-- –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="main">
    <div class="container">

      <!-- –ù–∞–≤–∏–≥–∞—Ü–∏—è -->
      <nav class="nav">
        <div class="nav__steps">
          <div class="nav__step nav__step--active">
            <span class="nav__step-number">1</span>
            <span class="nav__step-text">–†–∞—Å—á–µ—Ç</span>
          </div>
          <div class="nav__step">
            <span class="nav__step-number">2</span>
            <span class="nav__step-text">–û—Ñ–æ—Ä–º–ª–µ–Ω–∏–µ</span>
          </div>
          <div class="nav__step">
            <span class="nav__step-number">3</span>
            <span class="nav__step-text">–û–ø–ª–∞—Ç–∞</span>
          </div>
        </div>
      </nav>

      <!-- –ï–¥–∏–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å –ò–ò -->
      <div class="ai-calculator">

        <!-- –ó–∞–≥–æ–ª–æ–≤–æ–∫ -->
        <div class="ai-calculator__header">
          <h2 class="ai-calculator__title">ü§ñ Grok AI + –ú–æ—â–Ω—ã–π –ü–∞—Ä—Å–µ—Ä</h2>
          <p class="ai-calculator__subtitle">–î–ª—è –ø–æ–ª–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞ –∫ Grok –∞–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –Ω–∞ <a href="https://puter.com" target="_blank" style="color: #0056b3; text-decoration: underline;">puter.com</a></p>
        </div>

        <!-- –ß–∞—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å -->
        <div class="ai-chat">

          <!-- –°–æ–æ–±—â–µ–Ω–∏—è -->
          <div id="ai-messages" class="ai-chat__messages">
            <div class="message message--assistant">
              <div class="message__avatar">ü§ñ</div>
              <div class="message__content">
                <div class="message__text">üöÄ <strong>–ü—Ä–∏–≤–µ—Ç! –Ø Grok AI + –ú–æ—â–Ω—ã–π –û–±—É—á–∞–µ–º—ã–π –ü–∞—Ä—Å–µ—Ä</strong><br><br>
                <strong>–ú–æ–∏ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:</strong><br>
                ‚Ä¢ üß† <strong>Grok AI</strong> - –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω—ã–π –ò–ò –∫–∞–∫ —É xAI (—Ç—Ä–µ–±—É–µ—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏)<br>
                ‚Ä¢ üéì <strong>–û–±—É—á–∞–µ–º—ã–π –ø–∞—Ä—Å–µ—Ä</strong> - —É—á–∏—Ç—Å—è –Ω–∞ –≤–∞—à–∏—Ö –≤–æ–ø—Ä–æ—Å–∞—Ö<br>
                ‚Ä¢ üî¢ <strong>–ê–≤—Ç–æ-—Ä–∞—Å—á–µ—Ç—ã</strong> - –º–≥–Ω–æ–≤–µ–Ω–Ω—ã–µ —Ä–∞—Å—á–µ—Ç—ã –∏–∑ —Ç–µ–∫—Å—Ç–∞<br>
                ‚Ä¢ üìö <strong>–ë–∞–∑–∞ –∑–Ω–∞–Ω–∏–π</strong> - 50+ —É–º–Ω—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤<br>
                ‚Ä¢ üí° <strong>–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ —Å–æ–≤–µ—Ç—ã</strong> - –∞–Ω–∞–ª–∏–∑ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏<br><br>
                <strong>–î–ª—è Grok AI:</strong> –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—å –Ω–∞ <a href="https://puter.com" target="_blank" style="color: #0056b3;">puter.com</a><br><br>
                <em>–ü—Ä–∏–º–µ—Ä—ã:</em><br>
                "–°–±–µ—Ä–±–∞–Ω–∫ –æ—Å–∑ 3000000 –º—É–∂ 15.08.1985 –∫–≤–∞—Ä—Ç–∏—Ä–∞"<br>
                "–ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã –¥–ª—è —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∂–∏–∑–Ω–∏?"<br>
                "–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É?"</div>
              </div>
            </div>
          </div>

          <!-- –í–≤–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏—è -->
          <div class="ai-chat__input-container">
            <input
              type="text"
              id="ai-input"
              class="ai-chat__input"
              placeholder="–ù–∞–ø—Ä–∏–º–µ—Ä: –í–¢–ë –æ—Å—Ç 5103175 –º—É–∂ 15.08.1965 –∂–∏–∑–Ω—å"
              maxlength="1000"
            >
            <button id="ai-send" class="ai-chat__send-btn">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
          </div>

          <!-- –ë—ã—Å—Ç—Ä—ã–µ –ø–æ–¥—Å–∫–∞–∑–∫–∏ -->
          <div class="ai-chat__suggestions">
            <div class="suggestions-row">
              <button class="suggestion-btn" data-text="–í–¢–ë –æ—Å—Ç 5103175 –º—É–∂ 15.08.1965 —Å—Ç 10 –∫–¥ 23.11.2020 –∂–∏–∑–Ω—å">üí∞ –†–∞—Å—á–µ—Ç –∂–∏–∑–Ω–∏ –í–¢–ë</button>
              <button class="suggestion-btn" data-text="–°–±–µ—Ä–±–∞–Ω–∫ –æ—Å–∑ 3000000 –º—É–∂ 15.08.1985 –∫–≤–∞—Ä—Ç–∏—Ä–∞ –∏–º—É—â–µ—Å—Ç–≤–æ">üè† –†–∞—Å—á–µ—Ç –∏–º—É—â–µ—Å—Ç–≤–∞</button>
              <button class="suggestion-btn" data-text="–î–æ–º.–†–§ –æ—Å—Ç 2500000 –∂–µ–Ω 12.03.1990 –¥–æ–º –∫–∏—Ä–ø–∏—á">üèòÔ∏è –î–æ–º.–†–§ –∫–æ–º–ø–ª–µ–∫—Å</button>
            </div>
            <div class="suggestions-row">
              <button class="suggestion-btn" data-text="–ö–∞–∫–∏–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω—É–∂–Ω—ã –¥–ª—è —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∂–∏–∑–Ω–∏?">üìÑ –î–æ–∫—É–º–µ–Ω—Ç—ã –∂–∏–∑–Ω—å</button>
              <button class="suggestion-btn" data-text="–í —á–µ–º —Ä–∞–∑–Ω–∏—Ü–∞ –º–µ–∂–¥—É –≤–∏–¥–∞–º–∏ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è?">‚öñÔ∏è –°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ä–∏—Å–∫–æ–≤</button>
              <button class="suggestion-btn" data-text="–ö–∞–∫ –ø–æ–ª—É—á–∏—Ç—å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—É—é —Å–∫–∏–¥–∫—É –Ω–∞ –∏–ø–æ—Ç–µ–∫—É?">üí° –ú–∞–∫—Å–∏–º—É–º —Å–∫–∏–¥–æ–∫</button>
            </div>
            <div class="suggestions-row">
              <button class="suggestion-btn" data-text="–ß—Ç–æ –¥–µ–ª–∞—Ç—å –µ—Å–ª–∏ –ø—Ä–æ–∏–∑–æ—à–µ–ª —Å—Ç—Ä–∞—Ö–æ–≤–æ–π —Å–ª—É—á–∞–π?">üö® –ê–≤–∞—Ä–∏–π–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è</button>
              <button class="suggestion-btn" data-text="–û–±—ä—è—Å–Ω–∏ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ –ò–ò">üéì –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ–±—É—á–µ–Ω–∏–µ</button>
              <button class="suggestion-btn" data-text="–†–∞—Å—Å–∫–∞–∂–∏ –æ —Å–µ–±–µ - –∫—Ç–æ —Ç—ã –∏ —á—Ç–æ —É–º–µ–µ—à—å?">ü§ñ –û —Å–µ–±–µ</button>
            </div>
          </div>

        </div>

      </div>

      <!-- –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è -->
      <section class="examples">
        <h3 class="examples__title">–ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤</h3>
        <div class="examples__grid">
          <div class="example__item">
            <h4>–¢–æ–ª—å–∫–æ —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏–µ –∂–∏–∑–Ω–∏</h4>
            <code>–í–¢–ë –æ—Å—Ç 5103175 –º—É–∂ 15.08.1965 —Å—Ç 10 –∫–¥ 23.11.2020 –∂–∏–∑–Ω—å</code>
          </div>
          <div class="example__item">
            <h4>–ñ–∏–∑–Ω—å –∏ –∏–º—É—â–µ—Å—Ç–≤–æ</h4>
            <code>–°–±–µ—Ä –∂+–∏–º –æ—Å–∑ = 3 232 000 –¥–æ–º 2022 –∫–∏—Ä–ø–∏—á –º—É–∂ 08.08.1989</code>
          </div>
          <div class="example__item">
            <h4>–° –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –∑–∞–µ–º—â–∏–∫–∞–º–∏</h4>
            <code>–ê–∫–ë–∞—Ä—Å –æ—Å—Ç 2232907 –æ–Ω 50% 13.04.1968 –æ–Ω–∞ 50% 02.05.1968 –∫–≤-—Ä–∞</code>
          </div>
        </div>
      </section>


    </div>
  </main>

  <!-- –§—É—Ç–µ—Ä -->
  <footer class="footer">
    <div class="footer__container">
      <div class="footer__content">
        <p>¬© 2025 –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä —Å—Ç—Ä–∞—Ö–æ–≤–∞–Ω–∏—è –∏–ø–æ—Ç–µ–∫–∏</p>
      </div>
    </div>
  </footer>

  <script>
    // –ï–¥–∏–Ω—ã–π –ò–ò –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    function initializeChatInterface() {
      const aiInput = document.getElementById('ai-input');
      const aiSendBtn = document.getElementById('ai-send');
      const aiMessages = document.getElementById('ai-messages');
      const suggestionBtns = document.querySelectorAll('.suggestion-btn');

      let conversationHistory = [];

      // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ —á–µ—Ä–µ–∑ —É–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
      function processQuery(query) {
        return new Promise(async (resolve, reject) => {
          try {
            console.log('–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞:', query);
            console.log('conversationHistory:', conversationHistory);

            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Ñ—É–Ω–∫—Ü–∏–∏
            if (typeof window.chatWithGrok !== 'function') {
              console.error('–§—É–Ω–∫—Ü–∏—è chatWithGrok –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞');
              reject(new Error('–§—É–Ω–∫—Ü–∏—è chatWithGrok –Ω–µ –¥–æ—Å—Ç—É–ø–Ω–∞'));
              return;
            }

            const response = await window.chatWithGrok(query, conversationHistory);
            console.log('–ü–æ–ª—É—á–µ–Ω –æ—Ç–≤–µ—Ç:', response);

            conversationHistory = response.conversationHistory;
            resolve(response.message);
          } catch (error) {
            console.error('–û—à–∏–±–∫–∞ –≤ processQuery:', error);
            reject(error);
          }
        });
      }

      // –î–æ–±–∞–≤–ª–µ–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
      function addMessage(content, type, isCalculation = false) {
        const messageDiv = document.createElement('div');
        messageDiv.className = `message message--${type}`;

        const avatar = type === 'user' ? 'üë§' : 'ü§ñ';
        const avatarBg = type === 'user' ? '#0056b3' : (isCalculation ? '#10a37f' : '#10a37f');

        let messageContent = content;
        if (isCalculation) {
          // –î–ª—è —Ä–∞—Å—á–µ—Ç–æ–≤ —Ñ–æ—Ä–º–∞—Ç–∏—Ä—É–µ–º –≤—ã–≤–æ–¥
          messageContent = `<div style="background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #0056b3;">${content.replace(/\n/g, '<br>')}</div>`;
        }

        messageDiv.innerHTML = `
          <div class="message__avatar" style="background: ${avatarBg}">${avatar}</div>
          <div class="message__content">
            <div class="message__text">${messageContent}</div>
          </div>
        `;

        aiMessages.appendChild(messageDiv);
        aiMessages.scrollTop = aiMessages.scrollHeight;
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—Ç–ø—Ä–∞–≤–∫–∏
      function sendMessage() {
        const message = aiInput.value.trim();
        if (!message) return;

        // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        addMessage(message, 'user');
        aiInput.value = '';
        aiSendBtn.disabled = true;
        aiSendBtn.textContent = '–û–±—Ä–∞–±–æ—Ç–∫–∞...';

        // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–ø—Ä–æ—Å —á–µ—Ä–µ–∑ —É–º–Ω—ã–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç
        processQuery(message).then(result => {
          addMessage(result, 'assistant');
          aiSendBtn.disabled = false;
          aiSendBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å';
        }).catch(error => {
          addMessage('–ò–∑–≤–∏–Ω–∏—Ç–µ, –ø—Ä–æ–∏–∑–æ—à–ª–∞ –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞.', 'assistant');
          aiSendBtn.disabled = false;
          aiSendBtn.textContent = '–û—Ç–ø—Ä–∞–≤–∏—Ç—å';
          console.error('Processing error:', error);
        });
      }

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
      aiSendBtn.addEventListener('click', sendMessage);
      aiInput.addEventListener('keypress', (e) => {
        if (e.key === 'Enter') {
          sendMessage();
        }
      });

      // –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –ø–æ–¥—Å–∫–∞–∑–æ–∫
      suggestionBtns.forEach(btn => {
        btn.addEventListener('click', () => {
          const text = btn.dataset.text;
          console.log('–ö–Ω–æ–ø–∫–∞ –ø–æ–¥—Å–∫–∞–∑–∫–∏ –Ω–∞–∂–∞—Ç–∞:', text);
          aiInput.value = text;
          // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π
          setTimeout(() => {
            if (!aiSendBtn.disabled) {
              sendMessage();
            }
          }, 100);
        });
      });

      console.log("–ò–ò –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω");
    }

    // –ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ –≤—Å–µ—Ö —Å–∫—Ä–∏–ø—Ç–æ–≤, –∑–∞—Ç–µ–º –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
    function waitForScripts() {
      if (typeof window.chatWithGrok === 'function' && typeof window.askGPTNeo === 'function') {
        console.log('–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –∑–∞–≥—Ä—É–∂–µ–Ω—ã, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å...');
        initializeChatInterface();
      } else {
        console.log('–ñ–¥–µ–º –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–ø—Ç–æ–≤...');
        setTimeout(waitForScripts, 100);
      }
    }

    document.addEventListener("DOMContentLoaded", () => {
      waitForScripts();
    });
  </script>

</body>
</html>
